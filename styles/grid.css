/* GAME GRID SECTION STYLES
   =========================
   Styles for the middle section: game grid, preview tiles, and dropping overlay.
   Requires: base.css (for design tokens)
*/

/* Grid Wrapper Container */
.game-grid-wrapper {
    flex: 3;
    background: var(--color-bg-card);
    border-radius: var(--size-border-radius-card);
    padding: var(--size-padding-card);
    box-shadow: var(--shadow-card);
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Next Letters Preview (Queue of upcoming letters) */
.next-letters-preview {
    display: none;
    justify-content: center;
    gap: 5px;
    opacity: 0;
    transition: opacity var(--transition-standard);
}

.next-letters-preview.visible {
    display: flex;
    opacity: 1;
}

/* Base Preview Letter Block */
.preview-letter-block {
    width: var(--size-letter-block);
    height: var(--size-letter-block);
    background-color: var(--color-text-muted);
    color: var(--color-text-white);
    font-size: var(--size-font-letter);
    font-weight: bold;
    border: 2px solid var(--color-border-primary);
    border-radius: var(--size-border-radius-block);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-block);
    transition: transform var(--transition-quick);
}

/* Preview Next-Up (Pulse + Glow effect) */
.preview-letter-block.next-up {
    border-color: var(--color-accent-secondary);
    transform: scale(1.15);
    background: var(--color-next-up);
    color: var(--color-text-primary);
    box-shadow: var(--shadow-next-up);
    animation: previewPulse var(--animation-duration-pulse) ease-in-out infinite;
}

/* Empty Preview Letter Block (no letters remaining) - Supersedes next-up styling */
.preview-letter-block.empty {
    background-color: #e0e0e0;
    border-color: #bdbdbd;
    color: #bdbdbd;
    box-shadow: none;
    opacity: 0.4;
    animation: none;
    transform: scale(1);
}

.preview-letter-block.empty::after {
    content: 'â€”';
    font-size: 30px;
}

/* Menu Preview Spacers (invisible but take up space for drop animation positioning) */
.preview-letter-block.menu-preview-spacer {
    background-color: transparent;
    border: none;
    box-shadow: none;
    opacity: 0;
    pointer-events: none;
}

/* Game Grid */
.game-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    grid-template-rows: repeat(6, 1fr);
    gap: 1px;
    border-radius: var(--size-border-radius-grid);
    position: relative;
    flex: 1;
    width: 100%;
    height: 100%;
    max-height: 70dvh;
    max-width: 900px;
    margin: 0 auto;
}

/* Individual Grid Square - Extends .block-base */
.grid-square {
    /* Inherit from .block-base: aspect-ratio, flex centering, font-weight, transition, box-sizing */
    background: linear-gradient(145deg, var(--color-white), #f5f5f5);
    border: 0.75px solid var(--color-border-light);
    border-radius: var(--size-border-radius-small);
    font-size: var(--size-font-grid);
    cursor: pointer;
}

/* Filled Grid Square */
.grid-square.filled {
    background: var(--color-text-muted);
    color: var(--color-text-white);
    border: 2px solid var(--color-border-primary);
    cursor: default;
}

/* Dropping Letter Overlay (animated letter during drop) */
.dropping-letter-overlay {
    position: fixed;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--size-font-grid);
    font-weight: bold;
    background: var(--color-text-muted);
    color: var(--color-text-white);
    border: 2px solid var(--color-border-primary);
    border-radius: var(--size-border-radius-small);
    pointer-events: none;
    z-index: 10;
    transition: all var(--transition-quick);
}

/* Menu dropping overlay - matches final menu button appearance */
.dropping-letter-overlay.menu-dropping {
    background: rgba(154, 154, 154, 0.5);
    color: #ffffff;
    border: 2px solid #6a6a6a;
    font-size: clamp(20px, 2.5vw, 28px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    outline: 3px solid rgba(106, 106, 106, 0.6);
    outline-offset: -1px;
    transform: scale(0.9);
    z-index: 150;
}

/* Dropping Overlay in Motion (animating state) */
.dropping-letter-overlay.animating {
    transition: top var(--letter-drop-duration, 0.3s) ease-in;
    background: linear-gradient(145deg, var(--color-blue-pale), var(--color-blue-pale-2));
    color: var(--color-text-primary);
    border-color: var(--color-accent-primary);
}

/* Word Found - Highlight and Shake Animation */
.grid-square.word-found {
    background: var(--color-green);
    color: var(--color-text-white);
    border-color: var(--color-green);
    animation: wordShake var(--animation-duration-word-found) ease-in-out forwards;
}

/* Keyframe for word shake animation (similar to title shake) */
@keyframes wordShake {
    0% {
        transform: translateX(0) scale(1);
    }
    25% {
        transform: translateX(-5px) scale(1.05);
    }
    50% {
        transform: translateX(5px) scale(1.05);
    }
    75% {
        transform: translateX(-5px) scale(1.05);
    }
    100% {
        transform: translateX(0) scale(1);
    }
}

/* Grid pulsate animation for user guidance */
@keyframes gridPulsate {
    0% {
        box-shadow: var(--shadow-card), 0 0 0 0 rgba(76, 175, 80, 0.7);
        transform: scale(1);
    }
    50% {
        box-shadow: var(--shadow-card), 0 0 20px 10px rgba(76, 175, 80, 0.3);
        transform: scale(1.015);
    }
    100% {
        box-shadow: var(--shadow-card), 0 0 0 0 rgba(76, 175, 80, 0);
        transform: scale(1);
    }
}

.game-grid.pulsating {
    animation: gridPulsate 1.5s ease-in-out 3;
    border: 2px solid var(--color-green);
}

/* Individual grid square pulsating animation */
@keyframes squarePulsate {
    0% {
        transform: scale(1);
        /* box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); */
    }
    50% {
        transform: scale(1.05);
        /* box-shadow: 0 0 10px 5px rgba(76, 175, 80, 0.4); */
    }
    100% {
        transform: scale(1);
        /* box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); */
    }
}

.grid-square.pulsating {
    animation: squarePulsate 1.5s ease-in-out infinite;
}

/* START sequence guide - orange glow pulsate */
@keyframes startGuideGlow {
    0% {
        box-shadow: 0 0 5px 2px rgba(255, 152, 0, 0.6);
        transform: scale(1);
    }
    50% {
        box-shadow: 0 0 20px 10px rgba(255, 152, 0, 0.8);
        transform: scale(1.08);
    }
    100% {
        box-shadow: 0 0 5px 2px rgba(255, 152, 0, 0.6);
        transform: scale(1);
    }
}

.grid-square.start-guide {
    animation: startGuideGlow 1s ease-in-out infinite;
    border: 2px solid #FF9800;
    background: rgba(255, 152, 0, 0.15);
    z-index: 10;
}

/* Focused square within a highlighted column (stronger visual) */
.grid-square.start-guide-focus {
    animation: startGuideGlow 1s ease-in-out infinite;
    border: 3px solid #FF6D00;
    background: rgba(255, 152, 0, 0.28);
    box-shadow: 0 0 24px 12px rgba(255, 152, 0, 0.75);
    transform: scale(1.06);
    z-index: 11;
}

/* Menu Button Styles - Greyish Monotone (No Gradients) */
.grid-square.menu-button {
    cursor: pointer;
    font-weight: bold;
    font-size: clamp(20px, 2.5vw, 28px);
    background: rgba(154, 154, 154, 0.5);
    color: #ffffff;
    border: 2px solid #6a6a6a;
    transition: background var(--transition-fast), box-shadow var(--transition-fast), outline var(--transition-fast);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    outline: 3px solid rgba(106, 106, 106, 0.6);
    outline-offset: -1px;

    transform: scale(0.9);        /* tweak this value to make it smaller/larger */
}

.grid-square.menu-button:hover {
    background: rgba(133, 133, 133, 0.6);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    outline-color: rgba(106, 106, 106, 0.8);
}

/* Column Click Simulation (for START animation) */
.grid-square.column-clicked {
    background: linear-gradient(145deg, var(--color-blue-pale), var(--color-blue-pale-2));
    border-color: var(--color-accent-primary);
    transform: scale(0.95);
    transition: all 0.1s ease-out;
}

/* Menu Arrow - Pulsating indicator */
.grid-square.menu-arrow {
    cursor: pointer;
    font-weight: 900;
    font-size: clamp(24px, 3vw, 32px);
    background: rgba(154, 154, 154, 0.3);
    color: #000000;
    border: 2px solid #6a6a6a;
    animation: menuArrowPulse 1.2s ease-in-out infinite;
}

@keyframes menuArrowPulse {
    0% {
        transform: scale(0.9);
        opacity: 0.7;
    }
    50% {
        transform: scale(1);
        opacity: 1.5    ;
    }
    100% {
        transform: scale(0.9);
        opacity: 0.7;
    }
}

/* Menu Flip-in Animation (for reset) */
@keyframes menuFlipIn {
    0% {
        transform: scale(0.9) rotateY(90deg);
        opacity: 0;
    }
    50% {
        transform: scale(0.95) rotateY(45deg);
        opacity: 0.5;
    }
    100% {
        transform: scale(0.9) rotateY(0deg);
        opacity: 1;
    }
}

.grid-square.menu-button.flipping {
    animation: menuFlipIn 0.4s ease-out forwards;
}

.grid-square.menu-arrow.flipping {
    /* Flip in, then start pulsating */
    animation: menuFlipIn 0.4s ease-out forwards, menuArrowPulse 1.2s ease-in-out 0.4s infinite;
}

/* ============================
   CLEAR MODE ANIMATIONS
   ============================ */

/* Grid cell celebrate animation */
.grid-square.celebrate {
    animation: celebrate 0.6s ease-out forwards;
}

@keyframes celebrate {
    0% {
        transform: scale(1) rotateZ(0deg);
        opacity: 1;
    }
    50% {
        transform: scale(1.2) rotateZ(-5deg);
    }
    100% {
        transform: scale(0.8) rotateZ(0deg);
        opacity: 0;
    }
}

/* Grid cell reveal animation for populated cells */
.grid-square.reveal {
    animation: reveal 0.4s ease-in-out forwards;
}

@keyframes reveal {
    0% {
        transform: rotateY(90deg);
        opacity: 0;
    }
    100% {
        transform: rotateY(0deg);
        opacity: 1;
    }
}
